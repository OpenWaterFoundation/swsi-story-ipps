<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>South Platte and Metro basin IPPs</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/jquery.fullpage.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
	<link href="css/custom-leaflet-style.css" rel="stylesheet">

    <!-- icon -->
    <link id="czr-favicon" rel="icon" href="images/co-triangle-favicon.ico" type="image/png">

    <!-- MapBox Leaflet -->
    <script src='https://api.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
   integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
   crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
   integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
   crossorigin=""></script>

   <!-- Javscript files included near bottom of page -->

  </head>

  <body>

    <!--Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#top">South Platte and Metro Basin IPPs</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="#background1">Background</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#mandi">M&I IPPs</a>
            </li>
           <li class="nav-item">
              <a class="nav-link" href="#ag">Ag IPPs</a>
            </li>			
           <li class="nav-item">
              <a class="nav-link" href="#eandr">E&R IPPs</a>
            </li>			
            <li class="nav-item">
              <a class="nav-link" href="#ippmap1">Maps of IPPs</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#exampleipp1">IPP Examples</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#resources">Resources</a>
            </li>						
          </ul>
        </div>
      </div>
    </nav>

    <div id="fullpage">
      <div class="section">
        <header class="text-white">
          <div class="container text-center">
              <h1>South Platte and Metro Basin IPPs</h1>
              <p class="lead">This story provides background information and the current status of Identified Projects and Processes (IPPs) in the South Platte and Metro basins.</p>
			  <p class="lead">This story also highlights a few IPPs in greater detail.</p>	
          </div>
        </header>
      </div>
      <div class="section">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-6 text-left-custom">
              <h2>Background of IPPs: SWSI 2004</h2>
              <p class="lead">The <a href="http://cwcbweblink.state.co.us/WebLink/ElectronicFile.aspx?docid=144066&searchid=2c16c041-d0b2-4ec5-ac42-8b95aa0c04e3&dbid=0" 
			  target="_blank">Statewide Water Supply Initiative (SWSI)</a>, first completed in 2004, was a comprehensive analysis of existing water supplies and existing and projected 
			  water demands through the year 2030.  One of the major findings from SWSI was that there will be a gap in water supply by 2030 for Colorado as a whole and for nearly all 
			  of the 8 major basins (figure at right). </p>  
			  <p class="lead">In order to address that gap, water management options were identified and compiled for each basin.  These were titled 
			  "Identified Projects and Processes" (IPPs) and were considered to be relatively well-defined options that could reasonably be expected to be implemented by 2030 to address 
			  current or increasing water needs.  A second category of options was titled "Options for Alternatives".  These were options for meeting the remaining gap and were considered
			  to have implementation issues, were more conceptual in nature or were more likely to be implemented in later years.  Many of the options identified that would benefit 
			  agricultural, environmental or recreational users were categorized as Options for Alternatives because their implementation was less certain due to reasons such as a lack
			  of suitable funding.  As such, the initial basin lists of IPPs tended to be more focused on municipal and industrial (M&I) uses. </p>
              <p class="lead">It was determined that IPPs had the ability to meet about 80% of Colorado's municipal and industrial water needs through 2030.  However, if the IPPs are 
			  not successfully implemented, Colorado would see a greater reduction in irrigated agricultural lands as municipal and industrial water providers seek permanent transfers
			  of agricultural water rights.</p>
              <p class="lead">General categories of M&I IPPs included:</p>  
			  <ul>
				<li>conservation</li> 
				<li>growing into existing supply</li> 
				<li>increased reuse of existing or future consumable supplies</li> 
				<li>rehabilitation, reoperation or enlargement of existing water supply facilities</li>
				<li>water transfers</li>
				<li>new water supply projects</li>
				<li>augmentation plans</li>
				<li>acquiring agricultural rights through development of irrigated lands or annexation requirements</li>
			  </ul>
            </div>
		    <div class="col-lg-6">
              <img class="image-centered" src="images/swsi2004-gap.png" frameborder="0"></img>
			  <p class="image-text">&copy; SWSI 2004, Figure ES-8: Effectiveness of IPPs in Meeting 2030 M&I and SSI Demands.</p>
            </div>			
          </div>
        </div>
      </div>
      <div class="section">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-7 text-left-custom">
              <h2>Background of IPPs: SWSI 2010</h2>
              <p class="lead">2010 saw an <a href="http://cwcb.state.co.us/water-management/water-supply-planning/Pages/SWSI2010.aspx" target="_blank">update</a> to SWSI.  
			  Key elements of the update were:</p>  
			  <ul>
			    <li>an analysis of water supply demands to 2050</li>
				<li>a summary of environmental and recreational needs in each basin, as identified by basin roundtables</li>
				<li>an analysis of supply availability in the Colorado River</li>
				<li>implementation elements associated with identified projects, water conservation, agricultural transfers and development of new water supplies</li>
				<li>the development of estimated costs of implementing water supply strategies</li>
			  </ul>	
              <p class="lead">More-detailed IPP information was gathered during SWSI 2010 than was developed for SWSI I (2004).  The following categories were used to describe M&I IPPs:</p>
			  <ul>
			    <li>agricultural water transfers</li>
				<li>reuse of existing fully consumable supplies</li>
				<li>growth into existing supplies</li> 
				<li>regional in-basin projects</li>
				<li>new transbasin projects</li>
				<li>firming in-basin water rights</li>
				<li>firming transbasin water rights</li>  
			  </ul>	
			  <p class="lead">If successfully implemented, these IPPs have the ability to meet some, but not all, of Colorado's 2050 M&I water needs (figure at right).  Therefore, these 
			  projects are considered critical to meeting Colorado's future water supply needs.</p>
			  <p class="lead">A different approach was taken for environmental and recreational (E&R, or nonconsumptive) IPPs.  Each basin roundtable described focus areas that 
			  represent where Colorado's important water-based E&R attributes are located.  The focus area maps were intended to assist in identifying where E&R needs are being 
			  met, where additional future study may need to take place or where implementation projects are needed.  The CWCB was then able to preliminarily identify focus 
			  areas with and without IPPs.</p>
			  <p class="lead">The key finding of SWSI 2010 was that Colorado faces a shortage of water for meeting <b><i>both</i></b> consumptive and E&R needs.  The key recommendation 
			  was that basin roundtables should determine and pursue projects and methods that address multiple purposes, including municipal, industrial, agricultural, 
			  environmental, recreational, risk management and compact compliance needs.  This recommendation led to the creation of Basin Implementation Plans (BIPs) for each 
			  basin.</p>
            </div>
		    <div class="col-lg-5">
              <img class="image-centered" src="images/swsi2010-gap.png" frameborder="0"></img>
			  <p class="image-text">&copy; SWSI 2010, Figure ES-20: 2050 M&I and SSI Gap Analysis - Medium Gap Scenario.</p>
            </div>				
          </div>
        </div> 
      </div>
	  <div class="section">
        <div class="container">
          <div class="row">
            <div class="col-lg-12 mx-auto">
              <h2>South Platte & Metro BIP and Municipal & Industrial IPPs</h2>
              <p class="lead">The South Platte and Metro basins elected to create a single Basin Implementation Plan (BIP).  The <a href="https://www.colorado.gov/pacific/sites/default/files/SouthPlatteBasinImplementationPlan-04172015.pdf" target="_blank"> 
			  BIP</a> was completed in 2015 and continued to use the same general categories to describe municipal and industrial IPPs as SWSI 2010, such as agricultural water 
			  transfers, growth into existing supplies and firming in-basin water rights.</p>
			  <p class="lead">The list of IPPs ranges from general projects, such as "Morgan County Unspecified IPP Firming In-Basin", to specific projects, such as Prairie Waters. 
			  The dataset contains fields for yield, cost, sponsor(s) and source of water for the project, but note that these data are not available for all projects, 
			  particularly water source.
			  <ul>
				<li>Yield - the anticipated amount of water the project will hold or divert annually.  Yield is listed in acre-feet, which is the amount of water that will 
				cover one acre to a depth of one foot.</li>
				<li>Cost - the estimated total cost of the project.</li>
				<li>Sponsor(s) - the organization(s) (municipality, water provider, etc.) that bring forth a project.</li>
				<li>Water Source - the river or groundwater basin that is the source of water for the project.  This information provides spatial context and a connection 
				to water planning and administration.</li>
			  </ul>
              <p class="lead">Maps of municipal and industrial IPPs can be found under the section "Maps of IPPs".			  
            </div>
          </div>
        </div> 
      </div>
      <div class="section">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-6">
              <img src="images/irrigated-acres-2050.png" frameborder="0"></img>
			  <p>&copy; Colorado Water Plan, Figure 6.2-1: Potential Changes in Irrigated Acres by 2050.</p>			  
            </div>
            <div class="col-lg-6 text-right-custom">
             <h2>South Platte & Metro BIP and Agricultural IPPs</h2>
			  <p class="lead">As indicated in the figure to the left, irrigated acreage in the South Platte Basin is projected to decline by 
			  2050.  However, IPPs specific to agricultural needs were not developed in the BIP.  It is generally understood that reductions in yield from municipal and 
			  industrial (M&I) IPPs will likely lead to much greater increases in agricultural transfers as a means to meet M&I demands.  Therefore, to meet agricultural 
			  needs, M&I IPP implementation must be successful.  While specific projects were not detailed for agricultural needs, multipurpose projects that also benefit 
			  agriculture will most likely involve new Colorado River supplies.  Additional surface storage projects that benefit agriculture, such as the 
			  <a href="https://chatfieldreallocation.org/" target="_blank">Chatfield Storage Reallocation Project</a>, would allow agricultural users to capture wet year 
			  flows and store them as drought reserve.</p>
			  <p class="lead">It is recommended that IPPs that also have an agricultural benefit should be categorized in such a way to make this clear.</p>
            </div>
          </div>
        </div>
      </div>	    
	  <div class="section">
        <div class="row">
          <div class="col-lg-4 text-left-custom">
            <h2>South Platte & Metro BIP and Environmental & Recreational IPPs</h2>
			<p class="lead">Appendix D of the BIP (Environmental and Recreational Assessment Methodology and Framework) provides a list of E&R IPPs which are based on 
			  SWSI 2010.  General categories of projects include:</p>
			<ul>
			  <li>mine remediation</li> 
			  <li>land conservation</li> 
			  <li>river restoration</li> 
			  <li>fish passage structures</li>
			  <li>riparian restoration</li>
			  <li>bank stabilization</li>
			  <li>channel reconstruction</li>
			  <li>minimum instream flows</li>
			  <li>fish reintroductions</li>
			</ul>
			<p class="lead">The E&R IPP list is not available in machine-readable format.  Therefore, E&R IPPs were not able to be mapped.  However, instream flow rights can 
			be considered a form of IPP because they fulfill an environmental need.  Instream flow rights are rights for minimum flows made exclusively by the Colorado Water 
			Conservation Board (CWCB) to preserve or improve the natural environment to a reasonable degree. This map shows decreed instream flow rights in the South Platte 
			and Metro basins.</p>	
          </div>
          <div class="col-lg-8">
            <div id="mapbox4" class="map-left"></div>
          </div>		  
        </div>		
      </div>
      <div class="section">
        <div class="row">
          <div class="col-lg-4 text-left-custom">
            <h3>IPPs by Location Flag</h3>
            <p>This map displays municipal and industrial (M&I) IPPs for both the South Platte and Metro basins.
		IPPs are color-coded by the technique used to determine locations, which are approximate.  Locations of IPPs were estimated using one of the 
		following methods:  centroid of the county boundary, centroid of the municipal boundary, centroid of the water district 
		boundary, reservoir location, office address of water provider, or centroid of the county, municipal, or water district 
		boundary offset by 0.02 degrees longitude to allow for visibility on the map.</p>
			<p>To find out more about an IPP, hover on a point on the map and a pop-up will appear that provides more detail, 
			such as a description, sponsor of the project and website.  Note that not all IPPs contain this information.</p>
          </div>
          <div class="col-lg-8">
            <div id="mapbox1" class="map-left"></div>
          </div>
        </div>
      </div>	  
      <div class="section">
        <div class="row">
          <div class="col-lg-4 text-left-custom">
            <h3>IPPs by Basin and Yield</h3>
            <p>This map displays municipal and industrial (M&I) IPPs for both the South Platte (blue) and Metro (orange) basins.
		IPPs are sized according to yield, if available.</p>
			<p>To find out more about an IPP, hover on a point on the map and a pop-up will appear that provides more detail.  
			Note that not all IPPs contain this information.</p>
          </div>
          <div class="col-lg-8">
            <div id="mapbox2" class="map-left"></div>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="row">
          <div class="col-lg-4 text-left-custom">
            <h3>IPPs by Basin and Cost</h3>
            <p>This map displays municipal and industrial (M&I) IPPs for both the South Platte (blue) and Metro (orange) basins.
		IPPs are sized according to estimated cost.  It is readily apparent that most IPPs do not contain cost information.</p>
			<p>To find out more about an IPP, hover on a point on the map and a pop-up will appear that provides more detail.  
			Note that not all IPPs contain this information.</p>
          </div>
          <div class="col-lg-8">
            <div id="mapbox5" class="map-left"></div>
          </div>
        </div>
      </div>	  
      <div class="section">
        <div class="row">
          <div class="col-lg-4 text-left-custom">
            <h3>Example IPP:  NISP</h3>
            <p>The Northern Integrated Supply Project, or NISP, is a water supply project coordinated by the Northern Colorado Water Conservancy 
			District (Northern Water).  Its goal is to provide the participating water providers (shown on the map in red) with approximately 40,000 acre-feet of water
			each year.</p>
			<p>NISP includes the construction of two reservoirs (shown as blue circles).  The first, Glade Reservoir, would be built northwest of the City of Fort Collins and 
			have a capacity of 170,000 acre-feet of water.  For comparison, Horsetooth Reservoir holds approximately 156,000 acre-feet.  The second 
			reservoir, Galeton Reservoir, would be built northeast of the City of Greeley and have a capacity of 45,600 acre-feet.</p>
			<p>Glade Reservoir would be filled with water from the Cache la Poudre River.  When its water right is in priority, water 
			will be diverted from the river at the existing Poudre Valley Canal near the mouth of the Poudre Canyon.  The maximum diversion rate 
			would be limited to approximately 1,000 cubic feet per second (cfs).</p>
			<p>Galeton Reservoir would be part of the South Platte Water Conservation Project.  Water from the South Platte River would be pumped to 
			Galeton Reservoir during winter and spring months.  Then, during irrigation season, the water would be released to the two largest 
			ditch companies in the Poudre watershed:  the New Cache La Poudre Irrigating Company and the Larimer and Weld Irrigation Company.  Through 
			a series of exchanges, the ditch companies will receive about 25% of their total supply from Galeton Reservoir while a similar amount of 
			water will be diverted upstream at the Poudre Valley Canal and stored in Glade Reservoir.</p>
			<p>Hover on a water provider on the map to see how much water it would be permitted under NISP.  Canals used to convey water from NISP are 
			shown in black.</p>
          </div>
          <div class="col-lg-8">
            <div id="mapbox3" class="map-left"></div>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="row">
          <div class="col-lg-4 text-left-custom">
            <h3>Example IPP:  ACWWA Flow Project</h3>
            <p>The Arapahoe County Water and Wastewater Authority (ACWWA) Flow Project is a water supply project that will provide an annual average delivery of 
			4,400 acre-feet of renewable water to the ACWWA service area.  A primary goal of this project is to reduce the ACWWA's use of non-renewable groundwater supplies.</p>
			<p>The project began in 2009.  Components of the project include: </p>
			<ul>
			  <li>Renewable water rights from the South Platte River Basin</li>
			  <li>1,400 acre-feet of storage in Chambers Reservoir</li>
			  <li>Water treatment capacity in the East Cherry Creek Valley (ECCV) Water Treatment Plant</li>
			  <li>Water supply wells, storage and infrastructure to deliver water to the ECCV Water Treatment Plant</li>
			  <li>Carrying capacity in the ECCV Northern Pipeline, a 48-inch pipeline from the Barr Lake area to the ECCV service area</li>
			  <li>Interconnection to deliver water supplies from the ECCV service area to ACWWA's service area</li>
			</ul>
			<p>Currently, the ACWWA is supplying about one-third of its total supply from the Flow Project.  Aside from moving ACWWA's water supply away from nonrenewable 
			groundwater to renewable sources, the water supply now has a lower hardness and lower total dissolved solids.</p>
			<p>For more information, visit the ACWWA Flow Project <a href="https://acwwa.com/27/ACWWA-Flow" target="_blank">website</a>.
          </div>
          <div class="col-lg-8">
            <div id="mapbox3" class="map-left"></div>
          </div>
        </div>
      </div>	  
      <div class="section">
	    <header class="text-white">
          <div class="container text-center">
              <h2>Resources</h2>
			  <p class="lead">This IPP story is part of the <a href="http://projects.openwaterfoundation.org/owf-proj-south-platte-data-platform/stories/" 
			  target="_blank">South Platte Data Platform Project</a>.  Additional information can be found at the following:</p> 
			  <p class="lead"><a href="http://cwcbweblink.state.co.us/WebLink/ElectronicFile.aspx?docid=144066&searchid=2c16c041-d0b2-4ec5-ac42-8b95aa0c04e3&dbid=0" 
			  target="_blank">Statewide Water Supply Initiative (SWSI) 2004</a></p> 
			  <p class="lead"><a href="http://cwcb.state.co.us/water-management/water-supply-planning/Pages/SWSI2010.aspx" target="_blank">SWSI 2010</a></p> 
			  <p class="lead"><a href="https://www.colorado.gov/cowaterplan" target="_blank">Colorado Water Plan</a></p>
          </div>
		</header>	
      </div>
     </div>	  
    </div>
    </body>

    <!-- JQuery JavaScript -->
    <script src="js/jquery.js"></script>
    <!-- Fullpage minified Javscript file -->
    <script type="text/javascript" src="js/jquery.fullpage.min.js"></script>
    <!-- Bootstrap Javascript File -->
    <script type="text/javascript" src="js/bootstrap.js"></script>
	<!-- Leaflet GeoPackage Javascript File -->
    <script type="text/javascript" src="js/leaflet-geopackage.js"></script>
	<!-- IPP dataset -->
	<script src="data/SouthPlatteMetro-IPPs.geojson"></script>
	<!-- NISP files -->
	<script src="data/NISP-canals-js.geojson"></script>
	<script src="data/NISP-participants-js.geojson"></script>	
	<script src="data/NISP-reservoirs-js.geojson"></script>	
	<script src="data/SouthPlatteMetro-instreamflow-reaches-decreed.geojson"></script>			
    <script>

      $(document).ready(function() {
        $('#fullpage').fullpage({
          anchors:['top','background1','background2', 'mandi', 'ag', 'eandr', 'ippmap1', 'ippmap2', 'ippmap3', 'exampleipp1', 'exampleipp2', 'resources'],
          sectionsColor:['#9DB66B','','','#9DB66B','#f7dd88','#5faae8','','','','','','#9DB66B'],
          navigation:true,
          navigationPosition:'right',
          navigationTooltips:['South Platte and Metro Basin IPPs','Background: SWSI 2004','Background: SWSI 2010','M&I IPPs','Ag IPPs','E&R IPPs','IPPs by Location Flag', 'IPPs by Basin and Yield', 'IPPs by Basin and Cost', 'Example IPP: NISP', 'Example IPP: ACWWA Flow Project', 'Resources'],
          recordHistory:false,
          menu:"#navbarResponsive"
        });
      });

// Leaflet Mapbox of decreed instream flow reaches
	  	var isfmap = L.map('mapbox4').setView([40.112, -104.128], 8);

	L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/outdoors-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia3Jpc3RpbnN3YWltIiwiYSI6ImNpc3Rjcnl3bDAzYWMycHBlM2phbDJuMHoifQ.vrDCYwkTZsrA_0FffnzvBw', {
		maxZoom: 18,
		attribution: 'Created by the <a href="http://openwaterfoundation.org">Open Water Foundation. </a>' + 
		'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery © <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.outdoors'
	}).addTo(isfmap);
		

// Control that shows IPP info on hover -- creates an info box
	var info0 = L.control();

	info0.onAdd = function (isfmap) {
		this._div = L.DomUtil.create('div', 'info'); // Creates a div with a class named "info"
		this.update();
		return this._div;
	};

// Method used to update the control based on feature properties passed
	info0.update = function (props) {
		this._div.innerHTML = '<h4>Instream Flow Right</h4>' +  (props ?
			'' + '<b>Stream: </b>' + props.Name + '<br/>' + '<b>Miles of Stream: </b>' + props.MILES + '<br />' + '<b>ID: </b>' + props.ID		
			: 'Hover on a stream segment');
	};
	info0.addTo(isfmap);

// Highlight a node when it is hovered over on the map
	function highlightFeature0(e) {
		var layer = e.target;

		layer.setStyle({
			weight: 4,
			color: '#252525',
			dashArray: '',
			fillOpacity: 0.7
		});

		if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
			layer.bringToFront();
		}
		info0.update(layer.feature.properties);
	}
	
	var isf;
	
// Reset the color after hovering over
	function resetHighlight0(e) {
		isf.resetStyle(e.target);
		info0.update();
	} 	
	
	function onEachFeature0(feature, layer) {
		layer.on({
			mouseover: highlightFeature0,
			mouseout: resetHighlight0
		});
	}
// Create style for instream flow reaches
    var isfStyle = {
			color: 'blue',
			weight: 2,
			opacity: 1
			};
// Add in instream flow layer			
	isf = L.geoJson(isf, {			
      style: isfStyle,
	  onEachFeature: onEachFeature0	  
	}).addTo(isfmap)
	
	isfmap.attributionControl.addAttribution("Data &copy; Colorado's Decision Support Systems");
	  
	  
// Leaflet MapBox of IPPs by Location Flag
    	var ippmap1 = L.map('mapbox1').setView([40.112, -104.828], 9);

    	L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/outdoors-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia3Jpc3RpbnN3YWltIiwiYSI6ImNpc3Rjcnl3bDAzYWMycHBlM2phbDJuMHoifQ.vrDCYwkTZsrA_0FffnzvBw', {
    		maxZoom: 18,
    		attribution: 'Created by the <a href="http://openwaterfoundation.org">Open Water Foundation. </a>' + 
    		'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
    			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
    			'Imagery © <a href="http://mapbox.com">Mapbox</a>',
    		id: 'mapbox.outdoors'
    	}).addTo(ippmap1);
		

      // Control that shows IPP info on hover -- creates an info box
      var info1 = L.control();

      info1.onAdd = function (ippmap1) {
      	this._div = L.DomUtil.create('div', 'info'); // Creates a div with a class named "info"
      	this.update();
      	return this._div;
      };

      // Method used to update the control based on feature properties passed
    	info1.update = function (props) {
    		this._div.innerHTML = '<h4>IPP</h4>' +  (props ?
    			'' + '<b>Name: </b>' + props.IPP_Name + '<br/>' + '<b>Description: </b>' + props.IPP_Description + '<br />' + '<b>IBCC Basin: </b>' + props.Basin + '<br />' +
    			'<b>Yield (acre-feet): </b>' + props.Yield + '<br />' + '<br />' + '<b>IPP Sponsor: </b>' + props.IPP_Sponsor + '<br />' + '<b>Website: </b>' 
				+ props.Website + '<br />' + '<b>Comment: </b>' + props.Comment			
    			: 'Hover on a point');
    	};
    	info1.addTo(ippmap1);

      // Highlight a node when it is hovered over on the map
    	function highlightFeature1(e) {
    		var layer = e.target;

    		layer.setStyle({
    			weight: 4,
    			color: '#252525',
    			dashArray: '',
    			fillOpacity: 0.7
    		});

    		if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
    			layer.bringToFront();
    		}
    		info1.update(layer.feature.properties);
    	}
    	
    	var geojson1;
	
      // Reset the color after hovering over
    	function resetHighlight1(e) {
    		geojson1.resetStyle(e.target);
    		info1.update();
    	} 	
    	
    	function onEachFeature1(feature, layer) {
    		layer.on({
    			mouseover: highlightFeature1,
    			mouseout: resetHighlight1
    		});
    	}

    	// Create function of color based on basin
    	function style1(feature) {
    	   var colorToUse1;
    	   var point = feature.properties.Lat_Long_Flag;
    	   
    	   return getColor1(point);
    	}

    	function getColor1(point){
    		if (point === "g1") colorToUse1 = "red";
    	   else if (point === "g2") colorToUse1 = "orange";
    	   else if (point === "g3") colorToUse1 = "yellow";
    	   else if (point === "g4") colorToUse1 = "green";
    	   else if (point === "g5") colorToUse1 = "blue";
    	   else if (point === "g6") colorToUse1 = "purple";
    	   else if (point === "g7") colorToUse1 = "brown";
    	   else colorToUse1 = "black";

    	    return colorToUse1;
    	}
    	
    	geojson1 = L.geoJson(IPPs, {		
    		
    	pointToLayer: function(feature, latlng) {	

    		return L.circleMarker(latlng, { 
    				 fillColor: style1(feature),
    				 color: style1(feature),
    				 weight: 1, 
    				 radius: 5,
    				 fillOpacity: 0.8 
    			});
    		},

    		onEachFeature: onEachFeature1
    	}).addTo(ippmap1);
    		
    	ippmap1.attributionControl.addAttribution('Data &copy; SWSI2010');
	
// Add a legend to the map
var legend = L.control ({position: 'bottomright'});

    legend.onAdd = function (ippmap1) {
	
	   var div = L.DomUtil.create('div', 'info legend'),
	       categories = ['g1', 'g2', 'g3', 'g4', 'g5', 'g6', 'g7', 'g8'],
		   labels = ['Centroid of county boundary','Centroid of municipal boundary','Centroid of water district boundary','Location of reservoir',
		                 'Other; see Comment','Centroid of county boundary, offset by 0.02 degrees longitude','Centroid of municipal boundary, offset by 0.02 degrees longitude',
						 'Centroid of water district boundary, offset by 0.02 degrees longitude'];
		   
		   for (var i = 0; i < categories.length; i++) {
		        div.innerHTML +=
				   '<i class="circle" style="background:' + getColor1(categories[i]) + '"></i>  ' +
				   (labels[i] ? labels[i] + '<br>' : '+');
		   }   
           return div;
		}; 
   legend.addTo(ippmap1);

      // Leaflet MapBox of IPPs by Basin and Yield
	var ippmap2 = L.map('mapbox2').setView([40.112, -104.828], 9);

	L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/outdoors-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia3Jpc3RpbnN3YWltIiwiYSI6ImNpc3Rjcnl3bDAzYWMycHBlM2phbDJuMHoifQ.vrDCYwkTZsrA_0FffnzvBw', {
		maxZoom: 18,
		attribution: 'Created by the <a href="http://openwaterfoundation.org">Open Water Foundation. </a>' + 
		'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery © <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.outdoors'
	}).addTo(ippmap2);
		

// Control that shows IPP info on hover -- creates an info box
	var info2 = L.control();

	info2.onAdd = function (ippmap2) {
		this._div = L.DomUtil.create('div', 'info'); // Creates a div with a class named "info"
		this.update();
		return this._div;
	};

// Method used to update the control based on feature properties passed
	info2.update = function (props) {
		this._div.innerHTML = '<h4>IPP</h4>' +  (props ?
			'' + '<b>Name: </b>' + props.IPP_Name + '<br/>' + '<b>Description: </b>' + props.IPP_Description + '<br />' + '<b>IBCC Basin: </b>' + props.Basin + '<br />' +
			'<b>Yield (acre-feet): </b>' + props.Yield			
			: 'Hover on a point');
	};
	info2.addTo(ippmap2);

// Highlight a node when it is hovered over on the map
	function highlightFeature2(e) {
		var layer = e.target;

		layer.setStyle({
			weight: 4,
			color: '#252525',
			dashArray: '',
			fillOpacity: 0.7
		});

		if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
			layer.bringToFront();
		}
		info2.update(layer.feature.properties);
	}
	
	var geojson2;
	
// Reset the color after hovering over
	function resetHighlight2(e) {
		geojson2.resetStyle(e.target);
		info2.update();
	} 	
	
	function onEachFeature2(feature, layer) {
		layer.on({
			mouseover: highlightFeature2,
			mouseout: resetHighlight2
		});
	}

	// Create function of color based on basin
	function style2(feature) {
	   var colorToUse2;
	   var point = feature.properties.Basin;
	   
	   return getColor2(point);
	}

	function getColor2(point){
		 if (point === "South Platte") colorToUse2 = "blue";
	   else colorToUse2 = "orange";

	    return colorToUse2;
	}

// Create function of size based on yield
	function sizebyYield(feature) {
	  var sizeToUse;
	  var point = feature.properties.Yield;
	  
	  return getSize(point);
	}
	
	function getSize(point){
		if (point > 10000)     sizeToUse = 16;
		else if (point > 5000) sizeToUse = 14;
		else if (point > 3500) sizeToUse = 12;
		else if (point > 2000) sizeToUse = 10;
		else if (point > 1000)  sizeToUse = 8;
		else if (point > 500)  sizeToUse = 6;
		else sizeToUse = 4;
		
		return sizeToUse;
	}
	
	geojson2 = L.geoJson(IPPs, {		
		
	pointToLayer: function(feature, latlng) {	

		return L.circleMarker(latlng, { 
				 fillColor: style2(feature),
				 color: style2(feature),
				 weight: 1, 
				 radius: sizebyYield(feature),
				 fillOpacity: 0.8 
			});
		},
		onEachFeature: onEachFeature2
	}).addTo(ippmap2);
		
	ippmap2.attributionControl.addAttribution('Data &copy; SWSI2010');

	
// Leaflet MapBox of IPPs by Basin and Cost
	var ippmap3 = L.map('mapbox5').setView([40.112, -104.828], 9);

	L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/outdoors-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia3Jpc3RpbnN3YWltIiwiYSI6ImNpc3Rjcnl3bDAzYWMycHBlM2phbDJuMHoifQ.vrDCYwkTZsrA_0FffnzvBw', {
		maxZoom: 18,
		attribution: 'Created by the <a href="http://openwaterfoundation.org">Open Water Foundation. </a>' + 
		'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery © <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.outdoors'
	}).addTo(ippmap3);
		

// Control that shows IPP info on hover -- creates an info box
	var info3 = L.control();

	info3.onAdd = function (ippmap3) {
		this._div = L.DomUtil.create('div', 'info'); // Creates a div with a class named "info"
		this.update();
		return this._div;
	};

// Method used to update the control based on feature properties passed
	info3.update = function (props) {
		this._div.innerHTML = '<h4>IPP</h4>' +  (props ?
			'' + '<b>Name: </b>' + props.IPP_Name + '<br/>' + '<b>Description: </b>' + props.IPP_Description + '<br />' + '<b>IBCC Basin: </b>' + props.Basin + '<br />' +
			'<b>Estimated Cost: </b>' + props.Estimated_Cost			
			: 'Hover on a point');
	};
	info3.addTo(ippmap3);

// Highlight a node when it is hovered over on the map
	function highlightFeature3(e) {
		var layer = e.target;

		layer.setStyle({
			weight: 4,
			color: '#252525',
			dashArray: '',
			fillOpacity: 0.7
		});

		if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
			layer.bringToFront();
		}
		info3.update(layer.feature.properties);
	}
	
	var geojson3;
	
// Reset the color after hovering over
	function resetHighlight3(e) {
		geojson3.resetStyle(e.target);
		info3.update();
	} 	
	
	function onEachFeature3(feature, layer) {
		layer.on({
			mouseover: highlightFeature3,
			mouseout: resetHighlight3
		});
	}

	// Create function of color based on basin
	function style2(feature) {
	   var colorToUse2;
	   var point2 = feature.properties.Basin;
	   
	   return getColor2(point2);
	}

	function getColor2(point2){
		 if (point2 === "South Platte") colorToUse2 = "blue";
	   else colorToUse2 = "orange";

	    return colorToUse2;
	}

// Create function of size based on cost
	function sizebyCost(feature) {
	  var sizeToUse2;
	  var point2 = feature.properties.Estimated_Cost;
	  
	  return getSize2(point2);
	}
	
	function getSize2(point2){
		if (point2 > 200000000)     sizeToUse2 = 16;
		else if (point2 > 100000000) sizeToUse2 = 14;
		else if (point2 > 25000000) sizeToUse2 = 10;
		else if (point2 > 10000000) sizeToUse2 = 8;
		else if (point2 > 1000000)  sizeToUse2 = 6;
		else sizeToUse2 = 4;
		
		return sizeToUse2;
	}
	
	geojson3 = L.geoJson(IPPs, {		
		
	pointToLayer: function(feature, latlng) {	

		return L.circleMarker(latlng, { 
				 fillColor: style2(feature),
				 color: style2(feature),
				 weight: 1, 
				 radius: sizebyCost(feature),
				 fillOpacity: 0.8 
			});
		},
		onEachFeature: onEachFeature3
	}).addTo(ippmap3);
		
	ippmap3.attributionControl.addAttribution('Data &copy; SWSI2010');
	
	
// Leaflet MapBox of NISP
    	var exampleipp1 = L.map('mapbox3').setView([40.312, -104.528], 10);

    	L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/outdoors-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia3Jpc3RpbnN3YWltIiwiYSI6ImNpc3Rjcnl3bDAzYWMycHBlM2phbDJuMHoifQ.vrDCYwkTZsrA_0FffnzvBw', {
    		maxZoom: 18,
    		attribution: 'Created by the <a href="http://openwaterfoundation.org">Open Water Foundation. </a>' + 
    		'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
    			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
    			'Imagery © <a href="http://mapbox.com">Mapbox</a>',
    		id: 'mapbox.outdoors'
    	}).addTo(exampleipp1);
		

      // Control that shows IPP info on hover -- creates an info box
      var info4 = L.control();

      info4.onAdd = function (exampleipp1) {
      	this._div = L.DomUtil.create('div', 'info'); // Creates a div with a class named "info"
      	this.update();
      	return this._div;
      };

      // Method used to update the control based on feature properties passed
    	info4.update = function (props) {
        if(props && props.WaterProviderName){
          this._div.innerHTML = '<h4>NISP</h4>' +  (props ?
            '' + '<b>Water Provider: </b>' + props.WaterProviderName + '<br/>' + '<b>Permitted Yield (acre-feet): </b>' + props.Permitted_Yield   
            : 'Hover on a circle');
        }
        else if(props && props.Capacity){
          this._div.innerHTML = '<h4>NISP</h4>' +  (props ?
            '' + '<b>Capacity: </b>' + props.Capacity + '<br/>' + '<b>Reservoir: </b>' + props.Reservoir 
            : 'Hover on a circle');
        }else{
          this._div.innerHTML = '<h4>NISP</h4>' +  (props ?
            '' + '<b>Name: </b>' + props.NAME
            : 'Hover on a circle');
        }
    		
    	};
    	info4.addTo(exampleipp1);

      // Highlight a node when it is hovered over on the map
    	function highlightFeature4(e) {
    		var layer = e.target;

    		layer.setStyle({
    			weight: 4,
    			color: '#252525',
    			dashArray: '',
    			fillOpacity: 0.7
    		});

    		if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
    			layer.bringToFront();
    		}
    		info4.update(layer.feature.properties);
    	}
    	
    	var nispparties;
	
      // Reset the color after hovering over
    	function resetHighlight4(e) {
    		nispparties.resetStyle(e.target);
    		info4.update();
    	} 	
    	
    	function onEachFeature4(feature, layer) {
    		layer.on({
    			mouseover: highlightFeature4,
    			mouseout: resetHighlight4
    		});
    	}
		
	 // Add in NISP participants layer
    	nispparties = L.geoJson(nispparties, {		
    		
    	pointToLayer: function(feature, latlng) {	

    		return L.circleMarker(latlng, { 
    				 fillColor: 'red',
    				 color: 'red',
    				 weight: 1, 
    				 radius: 5,
    				 fillOpacity: 0.8 
    			});
    		},

    		onEachFeature: onEachFeature4
    	}).addTo(exampleipp1);
		
	 // Add in NISP reservoirs layer		
    	nispreservoirs = L.geoJson(nispreservoirs, {		
    		
    	pointToLayer: function(feature, latlng) {	

    		return L.circleMarker(latlng, { 
    				 fillColor: 'blue',
    				 color: 'blue',
    				 weight: 1, 
    				 radius: 15,
    				 fillOpacity: 0.8 
    			});
    		},

    		onEachFeature: onEachFeature4
    	}).addTo(exampleipp1);		

	// Create line style for NISP canals
		var canalStyle = {
			color: '#3989FC',
			weight: 3,
			opacity: 1
		};
	 // Add in NISP canals layer		
		nispcanals = L.geoJSON(nispcanals, {
		  style: canalStyle,
      onEachFeature: onEachFeature4
		}).addTo(exampleipp1);
		
    	exampleipp1.attributionControl.addAttribution('Data &copy; Northern Colorado Water Conservancy District');	
   
 
    </script>

</html>
