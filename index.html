<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>South Platte and Metro basin IPPs</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/jquery.fullpage.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
	<link href="css/custom-leaflet-style.css" rel="stylesheet">

    <!-- icon -->
    <link id="czr-favicon" rel="icon" href="images/OWF-Logo-Favicon-32x32.png" type="image/png">

    <!-- MapBox Leaflet -->
    <script src='https://api.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
   integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
   crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
   integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
   crossorigin=""></script>

   <!-- Javscript files included near bottom of page -->

  </head>

  <body>

    <!--Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#top">South Platte and Metro Basin IPPs</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="#background1">Background</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#mandi">M&I IPPs</a>
            </li>
           <li class="nav-item">
              <a class="nav-link" href="#ag">Ag IPPs</a>
            </li>			
           <li class="nav-item">
              <a class="nav-link" href="#eandr">E&R IPPs</a>
            </li>			
            <li class="nav-item">
              <a class="nav-link" href="#ippmap1">Maps of IPPs</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div id="fullpage">
      <div class="section">
        <header class="text-white">
          <div class="container text-center">
              <h1>South Platte and Metro Basin IPPs</h1>
              <p class="lead">This story provides background information and the current status of Identified Projects and Processes (IPPs) in the South Platte and Metro basins.</p>
			  <p class="lead">This story also highlights a few IPPs in greater detail.</p>	
          </div>
        </header>
      </div>
      <div class="section">
        <div class="container">
          <div class="row">
            <div class="col-lg-12 mx-auto">
              <h2>Background of IPPs, Part 1</h2>
              <p class="lead">The <a href="http://cwcbweblink.state.co.us/WebLink/ElectronicFile.aspx?docid=144066&searchid=2c16c041-d0b2-4ec5-ac42-8b95aa0c04e3&dbid=0" 
			  target="_blank">Statewide Water Supply Initiative (SWSI)</a>, first completed in 2004, was a comprehensive analysis of existing water supplies and existing and projected 
			  water demands through the year 2030.  One of the major findings from SWSI was that there will be a gap in water supply by 2030 for Colorado as a whole and for nearly all 
			  of the 8 major basins. </p>  
			  <p class="lead">In order to address that gap, water management solutions, or options, were identified for all uses and compiled for each basin.  These were titled 
			  "Identified Projects and Processes" (IPPs) and were considered to be relatively well-defined options that could reasonably be expected to be implemented by 2030 to address 
			  current or increasing water needs.  A second category of options was titled "Options for Alternatives".  These were options for meeting the remaining gap and were considered
			  to have implementation issues, were more conceptual in nature or were more likely to be implemented in later years.  Many of the options identified that would benefit 
			  agricultural, environmental or recreational users were categorized as Options for Alternatives because their implementation was less certain due to reasons such as a lack
			  of suitable funding.  As such, the initial lists of IPPs for each basin tended to be more focused on municipal and industrial (M&I) uses. </p>
              <p class="lead">It was determined that IPPs had the ability to meet about 80% of Colorado's municipal and industrial water needs through 2030.  However, if the IPPs are 
			  not successfully implemented, Colorado would see a greater reduction in irrigated agricultural lands as municipal and industrial water providers seek permanent transfers
			  of agricultural water rights.</p>
              <p class="lead">General categories of M&I IPPs included:</p>  
			  <ul>
				<li>conservation</li> 
				<li>growing into existing supply</li> 
				<li>increased reuse of existing or future consumable supplies</li> 
				<li>rehabilitation, reoperation or enlargement of existing water supply facilities</li>
				<li>water transfers</li>
				<li>new water supply projects</li>
				<li>augmentation plans</li>
				<li>acquiring agricultural rights through development of irrigated lands or annexation requirements</li>
			  </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="container">
          <div class="row">
            <div class="col-lg-12 mx-auto">
              <h2>Background of IPPs, Part 2</h2>
              <p class="lead">2010 saw an <a href="http://cwcb.state.co.us/water-management/water-supply-planning/Pages/SWSI2010.aspx" target="_blank">update</a> to SWSI.  
			  Key elements of the update were:</p>  
			  <ul>
			    <li>an analysis of water supply demands to 2050</li>
				<li>a summary of environmental and recreational needs in each basin, as identified by basin roundtables</li>
				<li>an analysis of supply availability in the Colorado River</li>
				<li>implementation elements associated with identified projects, water conservation, agricultural transfers and development of new water supplies</li>
				<li>the development of estimated costs of implementing water supply strategies</li>
			  </ul>	
              <p class="lead">More-detailed IPP information was gathered during SWSI 2010 than was developed for SWSI I (2004).  The following categories were used to describe M&I IPPs:</p>
			  <ul>
			    <li>agricultural water transfers</li>
				<li>reuse of existing fully consumable supplies</li>
				<li>growth into existing supplies</li> 
				<li>regional in-basin projects</li>
				<li>new transbasin projects</li>
				<li>firming in-basin water rights</li>
				<li>firming transbasin water rights</li>  
			  </ul>	
			  <p class="lead">If successfully implemented, these IPPs have the ability to meet some, but not all, of Colorado's 2050 M&I water needs.  Therefore, these projects 
			  are considered critical to meeting Colorado's future water supply needs.</p>
			  <p class="lead">A different approach was taken for environmental and recreational (E&R, or nonconsumptive) IPPs.  Each basin roundtable described focus areas that 
			  represent where Colorado's important water-based E&R attributes are located.  The focus area maps were intended to assist in identifying where E&R needs are being 
			  met, where additional future study may need to take place or where implementation projects are needed.  The CWCB was then able to preliminarily identify focus 
			  areas with and without IPPs.</p>
			  <p class="lead">The key finding of SWSI 2010 was that Colorado faces a shortage of water for meeting both consumptive and E&R needs.  The key recommendation 
			  was that basin roundtables should determine and pursue projects and methods that address multiple purposes, including municipal, industrial, agricultural, 
			  environmental, recreational, risk management and compact compliance needs.  This recommendation led to the creation of Basin Implementation Plans (BIPs) for each 
			  basin; the South Platte Basin and Metro Basins elected to create a single BIP.</p>
            </div>
          </div>
        </div> 
      </div>
	  <div class="section">
        <div class="container">
          <div class="row">
            <div class="col-lg-12 mx-auto">
              <h2>South Platte & Metro BIP and M&I IPPs</h2>
              <p class="lead">The <a href="https://www.colorado.gov/pacific/sites/default/files/SouthPlatteBasinImplementationPlan-04172015.pdf" target="_blank">South Platte 
			  and Metro BIP</a> was completed in 2015 and continued to use the same general categories to describe M&I IPPs as SWSI 2010, such as agricultural water 
			  transfers, growth into existing supplies and firming in-basin water rights.</p>
			  <p class="lead">The list of IPPs ranges from general projects, such as "Morgan County Unspecified IPP Firming In-Basin", to specific projects, such as Prairie Waters. 
			  The dataset contains fields for yield, cost, sponsor(s) and source of water for the project, but note that these data are not available for all projects, 
			  particularly water source.
			  <ul>
				<li>Yield - the anticipated amount of water the project will hold or divert annually.  Yield is listed in acre-feet, which is the amount of water that will 
				cover one acre to a depth of one foot.</li>
				<li>Cost - the estimated total cost of the project.</li>
				<li>Sponsor(s) - the organization(s) (municipality, water provider, etc.) that bring forth a project.</li>
				<li>Water Source - the river or groundwater basin that is the source of water for the project.  This information provides spatial context and a connection 
				to water planning and administration.</li>
			  </ul>	

            </div>
          </div>
        </div> 
      </div>
      <div class="section">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-6">
              <img src="images/irrigated-acres-2050.png" frameborder="0"></img>
            </div>
            <div class="col-lg-6 text-right-custom">
             <h2>South Platte & Metro BIP and Agricultural IPPs</h2>
			  <p class="lead">As indicated in the figure to the left from the Colorado Water Plan, irrigated acreage in the South Platte Basin is projected to decline by 
			  2050.  However, IPPs specific to agricultural needs were not developed in the BIP.  It is generally understood that reductions in yield from M&I IPPs will 
			  likely lead to much greater increases in agricultural transfers as a means to meet M&I demands.  Therefore, to meet agricultural needs, M&I IPP implementation 
			  must be successful.  While specific projects were not detailed for agricultural needs, multipurpose projects that also benefit agriculture will most likely 
			  involve new Colorado River supplies.  Additional surface storage projects that benefit agriculture, such as the 
			  <a href="https://chatfieldreallocation.org/" target="_blank">Chatfield Storage Reallocation Project</a>, would allow agricultural users to capture wet year 
			  flows and store them as drought reserve.</p>
			  <p class="lead">It is recommended that IPPs that also have an agricultural benefit should be categorized in such a way to make this clear.</p>
            </div>
          </div>
        </div>
      </div>	    
	  <div class="section">
        <div class="container">
          <div class="row">
            <div class="col-lg-12 mx-auto">
              <h2>South Platte & Metro BIP and E&R IPPs</h2>
			  <p class="lead">Appendix D of the BIP (Environmental and Recreational Assessment Methodology and Framework) provides a list of E&R IPPs which are based on 
			  SWSI 2010.  General categories of projects include:</p>
			  <ul>
				<li>mine remediation</li> 
				<li>land conservation</li> 
				<li>river restoration</li> 
				<li>fish passage structures</li>
				<li>riparian restoration</li>
				<li>bank stabilization</li>
				<li>channel reconstruction</li>
				<li>minimum instream flows</li>
				<li>fish reintroductions</li>
			  </ul>
			  <p class="lead">The E&R IPP list is not available in machine-readable format.  Therefore, the remaining discussion and visualizations of IPPs are focused 
			  on M&I IPPs.</p>	
            </div>
          </div>
        </div> 
      </div> 
      <div class="section">
        <div class="row">
          <div class="col-lg-4 text-left-custom">
            <h3>IPPs by Location Flag</h3>
            <p>This map displays municipal and industrial (M&I) IPPs for both the South Platte and Metro basins.
		IPPs are color-coded by the technique used to determine locations, which are approximate.  Locations of IPPs were estimated using one of the 
		following methods:  centroid of the county boundary, centroid of the municipal boundary, centroid of the water district 
		boundary, reservoir location, office address of water provider, or centroid of the county, municipal, or water district 
		boundary offset by 0.02 degrees longitude to allow for visibility on the map.</p>
			<p>To find out more about an IPP, hover on a point on the map and a pop-up will appear that provides more detail, 
			such as a description, estimated cost, sponsor of the project and website.  Note that not all IPPs contain this information.</p>
          </div>
          <div class="col-lg-8">
            <div id="mapbox1" class="map-left"></div>
          </div>
        </div>
      </div>	  
      <div class="section">
        <div class="row">
          <div class="col-lg-4 text-left-custom">
            <h3>IPPs by Basin and Yield</h3>
            <p>This map displays municipal and industrial (M&I) IPPs for both the South Platte (blue) and Metro (orange) basins.
		IPPs are sized according to yield, if available.</p>
			<p>To find out more about an IPP, hover on a point on the map and a pop-up will appear that provides more detail, 
			such as a description, estimated cost, sponsor of the project and website.  Note that not all IPPs contain this information.</p>
          </div>
          <div class="col-lg-8">
            <div id="mapbox2" class="map-left"></div>
          </div>
        </div>
      </div>
    </div>
    </body>

    <!-- JQuery JavaScript -->
    <script src="js/jquery.js"></script>
    <!-- Fullpage minified Javscript file -->
    <script type="text/javascript" src="js/jquery.fullpage.min.js"></script>
    <!-- Bootstrap Javascript File -->
    <script type="text/javascript" src="js/bootstrap.js"></script>
	<!-- IPP dataset -->
	<script src="data/SouthPlatteMetro-IPPs.geojson"></script>

    <script>

      $(document).ready(function() {
        $('#fullpage').fullpage({
          anchors:['top','background1','background2', 'mandi', 'ag', 'eandr', 'ippmap1', 'ippmap2'],
          sectionsColor:['#9DB66B','','','','#f7dd88','#5faae8','',''],
          navigation:true,
          navigationPosition:'right',
          navigationTooltips:['South Platte and Metro Basin IPPs','Background, Part 1','Background, Part 2','M&I IPPs','Ag IPPs','E&R IPPs','IPPs by Location Flag', 'IPPs by Basin and Yield'],
          recordHistory:false,
          menu:"#navbarResponsive"
        });
      });

      // Leaflet MapBox of IPPs by Location Flag
    	var ippmap1 = L.map('mapbox1').setView([40.112, -104.828], 9);

    	L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/outdoors-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia3Jpc3RpbnN3YWltIiwiYSI6ImNpc3Rjcnl3bDAzYWMycHBlM2phbDJuMHoifQ.vrDCYwkTZsrA_0FffnzvBw', {
    		maxZoom: 18,
    		attribution: 'Created by the <a href="http://openwaterfoundation.org">Open Water Foundation. </a>' + 
    		'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
    			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
    			'Imagery © <a href="http://mapbox.com">Mapbox</a>',
    		id: 'mapbox.outdoors'
    	}).addTo(ippmap1);
		

      // Control that shows IPP info on hover -- creates an info box
      var info = L.control();

      info.onAdd = function (ippmap1) {
      	this._div = L.DomUtil.create('div', 'info'); // Creates a div with a class named "info"
      	this.update();
      	return this._div;
      };

      // Method used to update the control based on feature properties passed
    	info.update = function (props) {
    		this._div.innerHTML = '<h4>IPP</h4>' +  (props ?
    			'' + '<b>Name: </b>' + props.IPP_Name + '<br/>' + '<b>Description: </b>' + props.IPP_Description + '<br />' + '<b>IBCC Basin: </b>' + props.Basin + '<br />' +
    			'<b>Yield (acre-feet): </b>' + props.Yield + '<br />' + '<b>Estimated Cost: </b>' + props.Estimated_Cost + '<br />' + '<b>IPP Sponsor: </b>' + 
    			props.IPP_Sponsor + '<br />' + '<b>Website: </b>' + props.Website + '<br />' + '<b>Comment: </b>' + props.Comment			
    			: 'Hover on a circle');
    	};
    	info.addTo(ippmap1);

      // Highlight a node when it is hovered over on the map
    	function highlightFeature(e) {
    		var layer = e.target;

    		layer.setStyle({
    			weight: 4,
    			color: '#252525',
    			dashArray: '',
    			fillOpacity: 0.7
    		});

    		if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
    			layer.bringToFront();
    		}
    		info.update(layer.feature.properties);
    	}
    	
    	var geojson1;
	
      // Reset the color after hovering over
    	function resetHighlight(e) {
    		geojson1.resetStyle(e.target);
    		info.update();
    	} 	
    	
    	function onEachFeature(feature, layer) {
    		layer.on({
    			mouseover: highlightFeature,
    			mouseout: resetHighlight
    		});
    	}

    	// Create function of color based on basin
    	function style1(feature) {
    	   var colorToUse1;
    	   var point = feature.properties.Lat_Long_Flag;
    	   
    	   return getColor1(point);
    	}

    	function getColor1(point){
    		if (point === "g1") colorToUse1 = "red";
    	   else if (point === "g2") colorToUse1 = "orange";
    	   else if (point === "g3") colorToUse1 = "yellow";
    	   else if (point === "g4") colorToUse1 = "green";
    	   else if (point === "g5") colorToUse1 = "blue";
    	   else if (point === "g6") colorToUse1 = "purple";
    	   else if (point === "g7") colorToUse1 = "brown";
    	   else colorToUse1 = "black";

    	    return colorToUse1;
    	}
    	
    	geojson1 = L.geoJson(IPPs, {		
    		
    	pointToLayer: function(feature, latlng) {	

    		return L.circleMarker(latlng, { 
    				 fillColor: style1(feature),
    				 color: style1(feature),
    				 weight: 1, 
    				 radius: 5,
    				 fillOpacity: 0.8 
    			});
    		},

    		onEachFeature: onEachFeature
    	}).addTo(ippmap1);
    		
    	ippmap1.attributionControl.addAttribution('Data &copy; SWSI2010');
	
// Add a legend to the map
var legend = L.control ({position: 'bottomright'});

    legend.onAdd = function (ippmap1) {
	
	   var div = L.DomUtil.create('div', 'info legend'),
	       categories = ['g1', 'g2', 'g3', 'g4', 'g5', 'g6', 'g7', 'g8'],
		   labels = ['Centroid of county boundary','Centroid of municipal boundary','Centroid of water district boundary','Location of reservoir',
		                 'Other; see Comment','Centroid of county boundary, offset by 0.02 degrees longitude','Centroid of municipal boundary, offset by 0.02 degrees longitude',
						 'Centroid of water district boundary, offset by 0.02 degrees longitude'];
		   
		   for (var i = 0; i < categories.length; i++) {
		        div.innerHTML +=
				   '<i class="circle" style="background:' + getColor1(categories[i]) + '"></i>  ' +
				   (labels[i] ? labels[i] + '<br>' : '+');
		   }   
           return div;
		}; 
   legend.addTo(ippmap1);

      // Leaflet MapBox of IPPs by Basin and Yield
	var ippmap2 = L.map('mapbox2').setView([40.112, -104.828], 9);

	L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/outdoors-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoia3Jpc3RpbnN3YWltIiwiYSI6ImNpc3Rjcnl3bDAzYWMycHBlM2phbDJuMHoifQ.vrDCYwkTZsrA_0FffnzvBw', {
		maxZoom: 18,
		attribution: 'Created by the <a href="http://openwaterfoundation.org">Open Water Foundation. </a>' + 
		'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery © <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.outdoors'
	}).addTo(ippmap2);
		

// Control that shows IPP info on hover -- creates an info box
	var info = L.control();

	info.onAdd = function (ippmap2) {
		this._div = L.DomUtil.create('div', 'info'); // Creates a div with a class named "info"
		this.update();
		return this._div;
	};

// Method used to update the control based on feature properties passed
	info.update = function (props) {
		this._div.innerHTML = '<h4>IPP</h4>' +  (props ?
			'' + '<b>Name: </b>' + props.IPP_Name + '<br/>' + '<b>Description: </b>' + props.IPP_Description + '<br />' + '<b>IBCC Basin: </b>' + props.Basin + '<br />' +
			'<b>Yield (acre-feet): </b>' + props.Yield + '<br />' + '<b>Estimated Cost: </b>' + props.Estimated_Cost + '<br />' + '<b>IPP Sponsor: </b>' + 
			props.IPP_Sponsor + '<br />' + '<b>Website: </b>' + props.Website + '<br />' + '<b>Comment: </b>' + props.Comment			
			: 'Hover on a circle');
	};
	info.addTo(ippmap2);

// Highlight a node when it is hovered over on the map
	function highlightFeature(e) {
		var layer = e.target;

		layer.setStyle({
			weight: 4,
			color: '#252525',
			dashArray: '',
			fillOpacity: 0.7
		});

		if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
			layer.bringToFront();
		}
		info.update(layer.feature.properties);
	}
	
	var geojson2;
	
// Reset the color after hovering over
	function resetHighlight(e) {
		geojson2.resetStyle(e.target);
		info.update();
	} 	
	
	function onEachFeature(feature, layer) {
		layer.on({
			mouseover: highlightFeature,
			mouseout: resetHighlight
		});
	}

	// Create function of color based on basin
	function style2(feature) {
	   var colorToUse2;
	   var point = feature.properties.Basin;
	   
	   return getColor2(point);
	}

	function getColor2(point){
		 if (point === "South Platte") colorToUse2 = "blue";
	   else colorToUse2 = "orange";

	    return colorToUse2;
	}

// Create function of size based on yield
	function sizebyYield(feature) {
	  var sizeToUse;
	  var point = feature.properties.Yield;
	  
	  return getSize(point);
	}
	
	function getSize(point){
		if (point > 10000)     sizeToUse = 16;
		else if (point > 5000) sizeToUse = 14;
		else if (point > 3500) sizeToUse = 12;
		else if (point > 2000) sizeToUse = 10;
		else if (point > 1000)  sizeToUse = 8;
		else if (point > 500)  sizeToUse = 6;
		else sizeToUse = 4;
		
		return sizeToUse;
	}
	
	geojson2 = L.geoJson(IPPs, {		
		
	pointToLayer: function(feature, latlng) {	

		return L.circleMarker(latlng, { 
				 fillColor: style2(feature),
				 color: style2(feature),
				 weight: 1, 
				 radius: sizebyYield(feature),
				 fillOpacity: 0.8 
			});
		},

		onEachFeature: onEachFeature
	}).addTo(ippmap2);
		
	map.attributionControl.addAttribution('Data &copy; SWSI2010');
	
// Add a legend to the map
var legend = L.control ({position: 'bottomright'});

    legend.onAdd = function (ippmap1) {
	
	   var div = L.DomUtil.create('div', 'info legend'),
	       categories = ['South Platte', 'Metro'],
		   labels = ['South Platte Basin','Metro Basin'];
		   
		   for (var i = 0; i < categories.length; i++) {
		        div.innerHTML +=
				   '<i class="circle" style="background:' + getColor(categories[i]) + '"></i>  ' +
				   (labels[i] ? labels[i] + '<br>' : '+');
		   }   
           return div;
		}; 
   legend.addTo(ippmap2);
     
    </script>

</html>
